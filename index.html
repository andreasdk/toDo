<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<script src="js/toDo.js"></script>
	<link rel="stylesheet" href="css/toDo.css">
</head>
<body>
	<h1>Todo List</h1>
	<div>
		<button onclick="handlers.toggleAll()">Toggle all</button>
	</div>

<div>
	<button onclick="handlers.addToDo()">Add Todos</button>
	<input id="addToDoTextInput" type="text">
</div>

<div>
	<button onclick="handlers.changeToDo()">Change Todo</button>
	<input id="changeToDoPositionInput" type="number">
	<input id="changeToDoTextInput" type="text">
</div>

<div>
	<button onclick="handlers.deleteToDo()">Delete Todo</button>
	<input id="deleteToDoPositionInput" type="number">
</div>

<div>
	<button onclick="handlers.toggleToDo()">Toggle Todo</button>
	<input id="toggleToDoPositionInput" type="number">
</div>
	
	<ul>
		
	</ul>

<script>

var handlers = {
	toggleAll: function() {
		toDoList.toggleAll();
		view.displayToDos();
	},
	addToDo : function() {
		var addToDoTextInput = document.getElementById('addToDoTextInput');
		toDoList.addToDo(addToDoTextInput.value);
		addToDoTextInput.value = '';
		view.displayToDos();
	},
	changeToDo : function() {
		var changeToDoPositionInput = document.getElementById('changeToDoPositionInput');
		var changeToDoTextInput = document.getElementById('changeToDoTextInput');
		toDoList.changeToDo(changeToDoPositionInput.valueAsNumber, changeToDoTextInput.value);
		changeToDoTextInput.value = '';
		changeToDoPositionInput.value = '';
		view.displayToDos();
	},
	deleteToDo : function(position) {
		toDoList.deleteToDo(position);
		view.displayToDos();
	},
	toggleToDo : function() {
		var toggleToDoPositionInput = document.getElementById('toggleToDoPositionInput');
		toDoList.toggleCompleted(toggleToDoPositionInput.valueAsNumber);
		toggleToDoPositionInput.value = '';
		view.displayToDos();
	}
};
var view = {
	displayToDos: function() {
		var toDosUl = document.querySelector('ul');
		toDosUl.innerHTML = '';
		for (var i = 0; i < toDoList.toDos.length; i++) {
			var toDoLi = document.createElement('li');
			var toDo = toDoList.toDos[i];
			var toDoTextWithCompletion = '';

			if(toDo.completed === true)
				toDoTextWithCompletion = '(x) ' + toDo.toDoText;
			else
				toDoTextWithCompletion = '( ) ' + toDo.toDoText;

			toDoLi.id = i;
			toDoLi.textContent = toDoTextWithCompletion;
			toDoLi.appendChild(this.createDeleteButton());
			toDosUl.appendChild(toDoLi);
		}
	},
	createDeleteButton : function() {
		var deleteButton = document.createElement('button');
		deleteButton.textContent = 'Delete';
		deleteButton.className = 'deleteButton';
		return deleteButton;
	},
	setUpEventListeners : function() {
	 var toDosUl = document.querySelector('ul');
	 toDosUl.addEventListener('click', function(event) {
	
	  var elementClicked = event.target;

	  if (elementClicked.className === 'deleteButton') {
		handlers.deleteToDo(parseInt(elementClicked.parentNode.id));
	  }
    });
  }	
};
view.setUpEventListeners();
</script>
</body>
</html>